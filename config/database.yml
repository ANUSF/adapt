<%
    include Java

    env = ENV["RAILS_ENV"]
    db_path = java.lang.System.getProperty('RAILS_DB_PATH')
    unless db_path
        if %w{stage production}.include? env
            db_base = (java.lang.System.getProperty('user.home') || ".") + "/db"
	else
	    db_base = "db"
	end
	db_name = "db_#{env}.sqlite3"
        db_path = "#{db_base}/#{db_name}"
    end
    puts "db_path = #{db_path}"
%>

bootstrap:
  adapter:  jdbcsqlite3
  database: <%= db_path %>
  timeout:  5000
  
stage:
  adapter:  jdbcsqlite3
  database: <%= db_path %>
  timeout:  5000
  
production:
  adapter:  jdbcsqlite3
  database: <%= db_path %>
  timeout:  5000

development:
  adapter:  jdbcsqlite3
  database: <%= db_path %>
  timeout:  5000
  
# Warning: The database defined as 'test' will be erased and
# re-generated from your development database when you run 'rake'.
# Do not set this db to the same as development or production.
test: &TEST
  adapter:  jdbcsqlite3
  database: db/db_test.sqlite3
  timeout:  5000
  
cucumber:
  <<: *TEST
